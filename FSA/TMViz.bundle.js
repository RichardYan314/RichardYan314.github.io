var TMViz=function(t){var e={};function r(n){if(e[n])return e[n].exports;var a=e[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(n,a,function(e){return t[e]}.bind(null,a));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/build/",r(r.s=258)}({1:
/*!********************!*\
  !*** external "_" ***!
  \********************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(t,e){t.exports=_},19:
/*!*************************!*\
  !*** external "lodash" ***!
  \*************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(t,e){t.exports=lodash},2:
/*!*********************!*\
  !*** external "d3" ***!
  \*********************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(t,e){t.exports=d3},20:
/*!*******************************!*\
  !*** ./src/StateAutomaton.ts ***!
  \*******************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){};e.StateAutomaton=n},21:
/*!***************************!*\
  !*** ./src/tape/tape.css ***!
  \***************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(t,e,r){t.exports=r.p+"tape/tape.css"},22:
/*!*********************!*\
  !*** ./src/util.js ***!
  \*********************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(t,e,r){"use strict";var n=/*@cc_on!@*/Boolean(document.documentMode)||Boolean(window.StyleMedia);e.nonNull=function(t){if(null==t)throw new Error("expected a non-null defined value, but got: "+String(t));return t},e.coalesce=function(t,e){return null!=t?t:e},e.applyMaybe=function(t,e){return null!=e?t(e):e},e.getFirst=function(t,e){for(var r=0;r<e.length;++r){var n=t(e[r]);if(null!=n)return n}},e.toDocFragment=function(t){var e=document.createDocumentFragment();return t.forEach(e.appendChild.bind(e)),e},e.isBrowserIEorEdge=n},258:
/*!*************************!*\
  !*** multi ./src/TMViz ***!
  \*************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(t,e,r){t.exports=r(/*! ./src/TMViz */55)},26:
/*!**********************!*\
  !*** ./src/watch.js ***!
  \**********************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(t,e,r){"use strict";function n(t,e,r){var n=Object.getOwnPropertyDescriptor(t,e);if(void 0===n)throw new TypeError("Cannot watch nonexistent property '"+e+"'");if(!n.configurable)throw new TypeError("Cannot watch non-configurable property '"+e+"'");if(n.writable||void 0!==n.set){var a=function(){if(n.set)return{get:n.get,set:function(a){return n.set.call(t,r.call(t,e,t[e],a))}};var a=n.value;return{get:function(){return a},set:function(n){return a=r.call(t,e,a,n)}}}();return Object.defineProperty(t,e,a),n}}e.watch=n,e.watchInit=function(t,e,r){var a=t[e],i=n(t,e,r);return i&&(t[e]=a),i}},5:
/*!******************************!*\
  !*** ./src/lodash-mixins.ts ***!
  \******************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(/*! lodash */19),a=function(t){return n.partial(n.isEqual,t)};n.mixin({equalsTo:a,contains:function(t,e){return n.find(t,a(e))}}),e.default=n},55:
/*!**********************!*\
  !*** ./src/TMViz.js ***!
  \**********************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(t,e,r){"use strict";var n=r(/*! ./TM.ts */56).default,a=r(/*! ./PDA.ts */57).default,i=r(/*! ./FSA.ts */58).default,o=r(/*! ./tape/TapeViz */59),s=r(/*! ./tape/BoundedTapeViz */61),u=r(/*! ./tape/StackViz */63),c=r(/*! ./state-diagram/StateGraph */65),l=r(/*! ./state-diagram/StateViz */66),p=r(/*! ./watch */26).watchInit,f=r(/*! d3 */2),h=r(/*! lodash/fp */1);function d(t,e){return function(r,n){var a=t.getInstructionAndEdge(r,n);return null==a?null:(e(a.edge),a.transition)}}function y(t){return f.select(t.domNode).classed("active-edge",!0).transition().style("stroke-width","3px").transition().style("stroke-width","1px").transition().duration(0).each("start",function(){f.select(this).classed("active-edge",!1)}).style("stroke",null).style("stroke-width",null)}function g(t,e){return new s(t.append("svg").attr("class","bounded-tape"),9,e.input)}function v(t){return new u(t.append("svg").attr("class","stack"),9,[])}function m(t,e){return new o(t.append("svg").attr("class","tm-tape"),9,e.blank,e.input)}function w(t,e,r){t=f.select(t);var o=new c(e.table,e.type);if(this.stateviz=new l(t,o.getVertexMap(),o.getEdges(),e.startStates,e.acceptStates),null!=r&&(this.positionTable=r),e.simulatable){this.edgeAnimation=y,this.stepInterval=100;var s=this,u=[];function w(t){var e=s.edgeAnimation(t);s.isRunning&&(u=h.union(u,[t]),e.transition().duration(s.stepInterval).each("end",function(){u=h.without(u,[t]),s.isRunning&&0===u.length&&s.step()}))}"fsa"===e.type?this.machine=new i(d(o,w),e.startStates,e.acceptStates,e.epsilonTransition,g(t,e)):"pda"===e.type?this.machine=new a(d(o,w),e.startStates,e.acceptStates,g(t,e),v(t)):"tm"===e.type&&(this.machine=new n(d(o,w),e.startStates,e.acceptStates,m(t,e))),p(this.machine,"states",function(t,e,r){return e instanceof Array?h.each(function(t){return f.select(o.getVertex(t).domNode).classed("current-state",!1)},e):f.select(o.getVertex(e).domNode).classed("current-state",!1),r instanceof Array?h.each(function(t){return f.select(o.getVertex(t).domNode).classed("current-state",!0)},r):f.select(o.getVertex(r).domNode).classed("current-state",!0),r}),this.isHalted=!1;var b=!1;Object.defineProperty(this,"isRunning",{configurable:!0,get:function(){return b},set:function(t){b!==t&&(b=t)&&this.step()}})}else this.step=function(){},this.reset=function(){};this.error=null,this.__parentDiv=t,this.__spec=e}w.prototype.step=function(){var t=this,e=h.attempt(function(){return t.machine.step()});(!1===e||h.isError(e))&&(this.isRunning=!1,this.isHalted=!0,h.isError(e)&&(this.error=e))},w.prototype.reset=function(){this.isRunning=!1,this.isHalted=!1,this.error=null,this.machine.states=this.__spec.startStates,this.machine.tape.domNode.remove(),this.machine instanceof i?this.machine.tape=g(this.__parentDiv,this.__spec):this.machine instanceof a?(this.machine.tape=g(this.__parentDiv,this.__spec),this.machine.stack.domNode.remove(),this.machine.stack=v(this.__parentDiv)):this.machine instanceof n&&(this.machine.tape=m(this.__parentDiv,this.__spec))},Object.defineProperty(w.prototype,"positionTable",{get:function(){return this.stateviz.positionTable},set:function(t){this.stateviz.positionTable=t}}),t.exports=w},56:
/*!*******************!*\
  !*** ./src/TM.ts ***!
  \*******************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(t,e,r){"use strict";var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var i=r(/*! ./tape/TMRuntimeError */7),o=r(/*! ./lodash-mixins */5),s=function(t){function e(e,r,n,a){var i=t.call(this)||this;return i.transition=e,i.states=r,i.acceptStates=n,i.tape=a,i}return a(e,t),e.prototype.toString=function(){return this.states.join(", ")+"\n"+String(this.tape)},e.prototype.move=function(t){switch(t){case"R":this.tape.headRight();break;case"L":this.tape.headLeft();break;case"S":break;default:throw new TypeError("not a valid tape movement: "+String(t))}},e.prototype.step=function(){var t=this.nextInstruction;if(null==t)return!1;if(0==t.length)return!1;if(t.length>1)throw i("Cannot simulate nondeterministic TM");var e=t[0];return this.tape.write(e.write),this.move(e.move),this.states=[e.to],!0},Object.defineProperty(e.prototype,"nextInstruction",{get:function(){var t=this;return o.default.chain(this.states).flatMap(function(e){return t.transition(e,t.tape.read())}).filter(o.default.identity()).value()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isHalted",{get:function(){return null==this.nextInstruction},enumerable:!0,configurable:!0}),e}(r(/*! ./StateAutomaton */20).StateAutomaton);e.default=s},57:
/*!********************!*\
  !*** ./src/PDA.ts ***!
  \********************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(t,e,r){"use strict";var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var i=r(/*! ./tape/TMRuntimeError */7),o=r(/*! ./lodash-mixins */5),s=function(t){function e(e,r,n,a,i){var o=t.call(this)||this;return o.transition=e,o.states=r,o.acceptStates=n,o.tape=a,o.stack=i,o}return a(e,t),e.prototype.toString=function(){return this.states.join(", ")+"\n"+String(this.tape)+"\n"+String(this.stack)},e.prototype.onStack=function(t){return o.default.isEqual(o.default.takeRight(this.stack,t.length),t)},e.prototype.step=function(){var t=this,e=o.default(this.nextInstruction).filter(function(e){return t.stack.isOn(e.pop)}).value();if(0==e.length)return!1;if(e.length>1)throw new i("Cannot simulate nondeterministic step","Transitions from state "+this.states+": "+JSON.stringify(e));var r=e[0];this.stack.pop(r.pop.length),this.stack.push(r.push),this.states=[r.to];try{this.tape.headRight()}catch(t){return!1}return!0},Object.defineProperty(e.prototype,"nextInstruction",{get:function(){var t=this;return o.default.chain(this.states).flatMap(function(e){return t.transition(e,t.tape.read())}).filter(o.default.identity()).value()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isHalted",{get:function(){return 0==this.nextInstruction.length},enumerable:!0,configurable:!0}),e}(r(/*! ./StateAutomaton */20).StateAutomaton);e.default=s},58:
/*!********************!*\
  !*** ./src/FSA.ts ***!
  \********************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(t,e,r){"use strict";var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var i=r(/*! ./lodash-mixins */5),o=function(t){function e(e,r,n,a,i){var o=t.call(this)||this;return o.transition=e,o.states=r,o.acceptStates=n,o.epsilonTransition=a,o.tape=i,o}return a(e,t),e.prototype.toString=function(){return this.states.join(", ")+"\n"+String(this.tape)},e.prototype.epsilonSteps=function(){for(var t,e=this.states;(t=this.nextEpsilonInstruction).length;){var r=i.default.difference(i.default.flatMap(t,function(t){return t.state}),e);e=i.default.union(e,r),this.states=r}this.states=e},e.prototype.step=function(){this.epsilonSteps();var t=this.nextInstruction;if(null==t)return!1;if(0==t.length)return!1;this.states=i.default.flatMap(t,function(t){return t.to}),this.epsilonSteps();try{this.tape.headRight()}catch(t){return!1}return!0},Object.defineProperty(e.prototype,"nextInstruction",{get:function(){var t=this;return i.default.chain(this.states).flatMap(function(e){return t.transition(e,t.tape.read())}).filter(i.default.identity()).value()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nextEpsilonInstruction",{get:function(){var t=this;return i.default.chain(this.states).flatMap(function(e){return t.transition(e,t.epsilonTransition)}).filter(i.default.identity()).value()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isHalted",{get:function(){return 0==this.nextInstruction.length},enumerable:!0,configurable:!0}),e}(r(/*! ./StateAutomaton */20).StateAutomaton);e.default=o},59:
/*!*****************************!*\
  !*** ./src/tape/TapeViz.js ***!
  \*****************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(t,e,r){"use strict";var n=r(/*! ./Tape.js */60),a=r(/*! d3 */2);r(/*! ./tape.css */21);var i=50,o=50;function s(t){return t.attr("class","tape-cell"),t.append("rect").datum(null).attr({width:i,height:o}),t.append("text").text(function(t){return t}).attr({x:i/2,y:o/2+8}),t}function u(t,e){return e=null==e?0:e,t.attr("transform",function(t,r){return"translate("+(10-i+i*(r+e))+")"}),t}function c(t){t.attr("transform","translate(0 10)").transition().duration(0).select(".exiting").remove()}function l(t,e,r,a){n.call(this,r,a),Object.defineProperty(this,"lookaround",{value:e,writable:!1,enumerable:!0}),Object.defineProperty(this,"domNode",{value:t,writable:!1,enumerable:!0});var l=i*(e+1+e-2)+20,p=o+20;t.attr({width:"95%",viewBox:[0,0,l,p].join(" ")}),this.wrapper=t.append("g").attr("class","wrapper").call(c),t.append("rect").attr({id:"tape-head",width:1.2*i,height:1.2*o,x:5-i+i*e,y:5}),this.wrapper.selectAll(".tape-cell").data(this.readRange(-e,e)).enter().append("g").call(s).call(u)}function p(t,e,r,n,a){e.call(s),r.classed("exiting",!0),t.selectAll(".tape-cell").call(u,a),t.attr("transform","translate("+(n*i).toString()+" 10)").transition().call(c)}l.prototype=Object.create(n.prototype),l.prototype.constructor=l,l.prototype.write=function(t){n.prototype.read.call(this)!==t&&(n.prototype.write.call(this,t),this.wrapper.selectAll(".exiting").remove(),a.select(this.wrapper[0][0].childNodes[this.lookaround]).datum(t).select("text").attr("fill-opacity","1").attr("stroke-opacity","1").transition().attr("fill-opacity","0.4").attr("stroke-opacity","0.1").transition().text(function(t){return t}).attr("fill-opacity","1").attr("stroke-opacity","1").transition().duration(0).attr("fill-opacity",null).attr("stroke-opacity",null))},l.prototype.headRight=function(){n.prototype.headRight.call(this),this.wrapper.selectAll(".exiting").remove(),p(this.wrapper,this.wrapper.append("g").datum(this.readOffset(this.lookaround)),this.wrapper.select(".tape-cell"),1,-1)},l.prototype.headLeft=function(){n.prototype.headLeft.call(this),this.wrapper.selectAll(".exiting").remove(),p(this.wrapper,this.wrapper.insert("g",":first-child").datum(this.readOffset(-this.lookaround)),this.wrapper.select(".wrapper > .tape-cell:last-of-type"),-1,0)},t.exports=l},60:
/*!**************************!*\
  !*** ./src/tape/Tape.js ***!
  \**************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(t,e,r){"use strict";var n=r(/*! lodash/fp */1);function a(t,e){Object.defineProperty(this,"blank",{value:t,writable:!1,enumerable:!0}),this.tape={before:[],after:null==e||0==e.length?[t]:e.slice().reverse(),toString:function(){return this.before.join("")+"🔎"+this.after.slice().reverse().join("")}}}a.prototype.read=function(){return n.last(this.tape.after)},a.prototype.write=function(t){this.tape.after[this.tape.after.length-1]=t},a.prototype.headRight=function(){var t=this.tape.before,e=this.tape.after;t.push(e.pop()),n.isEmpty(e)&&e.push(this.blank)},a.prototype.headLeft=function(){var t=this.tape.before,e=this.tape.after;n.isEmpty(t)&&t.push(this.blank),e.push(t.pop())},a.prototype.toString=function(){return this.tape.toString()},a.prototype.readOffset=function(t){var e=this.tape;return t>=0?t<=e.after.length-1?e.after[e.after.length-1-t]:this.blank:t>=-e.before.length?e.before[e.before.length+t]:this.blank},a.prototype.readRange=function(t,e){return n.range(t,e+1).map(function(t){return this.readOffset(t)},this)},t.exports=a},61:
/*!************************************!*\
  !*** ./src/tape/BoundedTapeViz.js ***!
  \************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(t,e,r){"use strict";var n=r(/*! ./BoundedTape.js */62),a=r(/*! d3 */2);r(/*! ./tape.css */21);var i=50,o=50;function s(t){return t.attr("class","tape-cell"),t.append("rect").attr("hidden",function(t){return null==t?"hidden":null}).style("opacity",function(t){return null==t?0:null}).datum(null).attr({width:i,height:o}),t.append("text").text(function(t){return t}).attr({x:i/2,y:o/2+8}),t}function u(t,e){return e=null==e?0:e,t.attr("transform",function(t,r){return"translate("+(10-i+i*(r+e))+")"}),t}function c(t){t.attr("transform","translate(0 10)").transition().duration(0).select(".exiting").remove()}function l(t,e,r){n.call(this,r),Object.defineProperty(this,"lookaround",{value:e,writable:!1,enumerable:!0}),Object.defineProperty(this,"domNode",{value:t,writable:!1,enumerable:!0});var a=i*(e+1+e-2)+20,l=o+20;t.attr({width:"95%",viewBox:[0,0,a,l].join(" ")}),this.wrapper=t.append("g").attr("class","wrapper").call(c),t.append("rect").attr({id:"tape-head",width:1.2*i,height:1.2*o,x:5-i+i*e,y:5}),this.wrapper.selectAll(".tape-cell").data(this.readRange(-e,e)).enter().append("g").call(s).call(u)}function p(t,e,r,n,a){e.call(s),r.classed("exiting",!0),t.selectAll(".tape-cell").call(u,a),t.attr("transform","translate("+(n*i).toString()+" 10)").transition().call(c)}l.prototype=Object.create(n.prototype),l.prototype.constructor=l,l.prototype.write=function(t){n.prototype.read.call(this)!==t&&(n.prototype.write.call(this,t),this.wrapper.selectAll(".exiting").remove(),a.select(this.wrapper[0][0].childNodes[this.lookaround]).datum(t).select("text").attr("fill-opacity","1").attr("stroke-opacity","1").transition().attr("fill-opacity","0.4").attr("stroke-opacity","0.1").transition().text(function(t){return t}).attr("fill-opacity","1").attr("stroke-opacity","1").transition().duration(0).attr("fill-opacity",null).attr("stroke-opacity",null))},l.prototype.headRight=function(){n.prototype.headRight.call(this),this.wrapper.selectAll(".exiting").remove(),p(this.wrapper,this.wrapper.append("g").datum(this.readOffset(this.lookaround)),this.wrapper.select(".tape-cell"),1,-1)},l.prototype.headLeft=function(){n.prototype.headLeft.call(this),this.wrapper.selectAll(".exiting").remove(),p(this.wrapper,this.wrapper.insert("g",":first-child").datum(this.readOffset(-this.lookaround)),this.wrapper.select(".wrapper > .tape-cell:last-of-type"),-1,0)},t.exports=l},62:
/*!*********************************!*\
  !*** ./src/tape/BoundedTape.js ***!
  \*********************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(t,e,r){"use strict";var n=r(/*! lodash/fp */1),a=r(/*! ./TMRuntimeError */7);function i(t){this.tape={content:t.slice(),head:0,toString:function(){return this.content.slice(0,head).join("")+"🔎"+this.content.slice(head).join("")}}}i.prototype.read=function(){var t=this.tape,e=t.head;if(0<=e&&e<t.content.length)return t.content[e];throw new a("Read position out of tape boundary.")},i.prototype.write=function(t){var e=this.tape,r=e.head;if(r<0||r>=e.content.length)throw IllegalOperationException();e.content[e.head]=t},i.prototype.headRight=function(){var t=this.tape;if(t.head+1>=t.content.length)throw new a;t.head++},i.prototype.headLeft=function(){var t=this.tape;if(t.head-1<0)throw new a;t.head--},i.prototype.toString=function(){return this.tape.toString()},i.prototype.readOffset=function(t){var e=this.tape,r=e.head;return 0<=r+t&&r+t<e.content.length?e.content[r+t]:null},i.prototype.readRange=function(t,e){return n.range(t,e+1).map(function(t){return this.readOffset(t)},this)},t.exports=i},63:
/*!******************************!*\
  !*** ./src/tape/StackViz.js ***!
  \******************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(t,e,r){"use strict";var n=r(/*! ./Stack.js */64);r(/*! d3 */2);r(/*! ./tape.css */21);var a=50,i=50;function o(t){return t.attr("class","tape-cell"),t.append("rect").attr("hidden",function(t){return null==t?"hidden":null}).style("opacity",function(t){return null==t?0:null}).style("stroke",function(t){return _.isEqual(t)([])?"grey":null}).datum(null).attr({width:a,height:i}),t.append("text").text(function(t){return t}).attr({x:a/2,y:i/2+8}),t}function s(t,e){return e=null==e?0:e,t.attr("transform",function(t,r){return"translate("+(10-a+a*(r+e))+")"}),t}function u(t){t.attr("transform","translate(0 10)").transition().duration(0).select(".exiting").remove()}function c(t,e,r){n.call(this,r),Object.defineProperty(this,"lookaround",{value:e,writable:!1,enumerable:!0}),Object.defineProperty(this,"domNode",{value:t,writable:!1,enumerable:!0});var o=a*(e+1+e-2)+20,s=i+20;t.attr({width:"95%",viewBox:[0,0,o,s].join(" ")}),this.wrapper=t.append("g").attr("class","wrapper").call(u),this.redraw()}c.prototype=Object.create(n.prototype),c.prototype.constructor=n,c.prototype.redraw=function(){this.wrapper.selectAll(".tape-cell").remove(),this.wrapper.selectAll(".tape-cell").data(this.readRange(2*this.lookaround-3-1,-4)).enter().append("g").call(o).call(s)},c.prototype.pop=function(t){n.prototype.pop.call(this,t),this.redraw()},c.prototype.push=function(t){n.prototype.push.call(this,t),this.redraw()},t.exports=c},64:
/*!***************************!*\
  !*** ./src/tape/Stack.js ***!
  \***************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(t,e,r){"use strict";var n=r(/*! lodash/fp */1),a=r(/*! ./TMRuntimeError */7);function i(t){this.content=t.slice()}i.prototype.isOn=function(t){return n.isEqual(n.takeRight(t.length)(this.content),t)},i.prototype.pop=function(t){if(this.content.length<t)throw new a("Poping from empty stack.");t&&(this.content=n.slice(0)(this.content.length-t)(this.content))},i.prototype.push=function(t){this.content=this.content.concat(t)},i.prototype.toString=function(){return this.content.slice().join("")},i.prototype.readOffset=function(t){var e=this.content;return t<0?[]:t>=e.length?null:e[e.length-1-t]},i.prototype.readRange=function(t,e){return n.range(t,e).map(function(t){return this.readOffset(t)},this)},t.exports=i},65:
/*!*****************************************!*\
  !*** ./src/state-diagram/StateGraph.ts ***!
  \*****************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(t,e,r){"use strict";var n=r(/*! ../lodash-mixins */5);function a(t,e){var r;r="fsa"===e?i:"pda"===e?o:s;var a=n.default.mapValues(t,function(t,e){return{label:e,outTrans:{}}}),u=[];return n.default.forEach(a,function(e,i){var o,s;e.outTrans=e.outTrans&&(o={},s={},n.default.forEach(t[i],function(t,i){n.default.forEach(n.default.castArray(t),function(i){var c=function(t,r){var i=s[t]||n.default.tap(s[t]={source:e,target:a[t],labels:[]},u.push.bind(u));return i.labels.push(r),i}(i.to,r(i));o[i.read]={transition:t,edge:c}})}),o)}),{vertices:a,edges:u}}function i(t){return t.read}function o(t){return t.read+", ["+t.pop.join(",")+"] ↦ ["+t.push.join(",")+"]"}function s(t){return u(t.read)+"→"+u(t.write)+","+t.move}function u(t){return" "===t?"␣":t}var c=function(){function t(t,e){this.derived=a(t,e)}return Object.defineProperty(t.prototype,"__vertices",{get:function(){return this.derived.vertices},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"__edges",{get:function(){return this.derived.edges},enumerable:!0,configurable:!0}),t.prototype.getVertexMap=function(){return this.__vertices},t.prototype.getEdges=function(){return this.__edges},t.prototype.getVertex=function(t){return this.__vertices[t]},t.prototype.getInstructionAndEdge=function(t,e){var r=this.__vertices[t];if(void 0===r)throw new Error("not a valid state: "+String(t));return r.outTrans&&r.outTrans[e]},t}();t.exports=c},66:
/*!***************************************!*\
  !*** ./src/state-diagram/StateViz.js ***!
  \***************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(t,e,r){"use strict";var n=r(/*! ../util */22).isBrowserIEorEdge,a=r(/*! d3 */2),i=r(/*! lodash/fp */1),o=r(/*! lodash */19).assign;function s(t,e){return t.map(function(t,r){return t+e[r]})}function u(t,e){return s(t,e.map(function(t){return-t}))}function c(t){return Math.sqrt(function(t){return t.map(function(t){return t*t}).reduce(function(t,e){return t+e},0)}(t))}function l(t,e){return[Math.cos(e)*t,Math.sin(e)*t]}function p(t){t.forEach(function(t){var e=t.source.index+","+t.target.index;this[e]=(this[e]||0)+1},this)}p.prototype.numEdgesFromTo=function(t,e){return this[String(t)+","+String(e)]||0};var f=Object.freeze({loop:{},arc:{},straight:{}});function h(t,e,r){var n,a;return e===f.loop?(n=l(t,-15*Math.PI/180),a=" a 19,27 45 1,1 "+n[0]+","+(n[1]+t),function(){return"M "+r.source.x+","+(r.source.y-t)+a}):e===f.arc?function(){var e,n,a,i=[r.source.x,r.source.y],o=[r.target.x,r.target.y],p=u(o,i),f=1.2*c(p),h=(n=(e=p)[0],a=e[1],Math.atan2(a,n)),d=-Math.PI/2/2,y=s(i,l(t,h+d)),g=s(o,l(t,h+Math.PI-d));return i[0]<=o[0]?"M "+y[0]+" "+y[1]+" A "+f+" "+f+" 0 0,1 "+g[0]+" "+g[1]:"M "+g[0]+" "+g[1]+" A "+f+" "+f+" 0 0,0 "+y[0]+" "+y[1]}:e===f.straight?function(){var e=[r.source.x,r.source.y],n=[r.target.x,r.target.y],a=u(n,e);if(0===a[0]&&0===a[1])return null;var i,o,s=u(n,function(t,e){return t.map(function(t){return e*t})}((o=c(i=a),i.map(function(t){return t/o})),t));return"M "+e[0]+" "+e[1]+" L "+s[0]+" "+s[1]}:void 0}function d(t){return t}function y(){}function g(t,e,r){return Math.max(t,Math.min(r,e))}p.prototype.shapeForEdge=function(t){return t.target.index===t.source.index?f.loop:this.numEdgesFromTo(t.target.index,t.source.index)?f.arc:f.straight};var v=n?function(t,e){return t.append("div").style({width:"100%",height:"0","padding-bottom":100*e+"%",position:"relative"}).append("svg").style({position:"absolute",top:"0",left:"0"})}:function(t){return t.append("svg")};function m(t,e,r,n,o){var s=t[0][0].parentNode.id||"",u=800,c=500,l=a.scale.category10(),m=v(t,c/u);function w(t){t.fixed=!1,x.resume()}m.attr({viewBox:[0,0,u,c].join(" "),version:"1.1",":xmlns":"http://www.w3.org/2000/svg",":xmlns:xlink":"http://www.w3.org/1999/xlink",style:"background: white"});var b=e instanceof Array?e:i.values(e);this.__stateMap=e;var x=a.layout.force().nodes(b).links(r).size([u,c]).linkDistance([140]).charge([-500]).theta(.1).gravity(.05).start(),_=x.drag().on("dragstart",function(t){t.fixed=!0,m.transition().style("box-shadow","inset 0 0 1px gold")}).on("dragend",function(){m.transition().style("box-shadow",null)}),k=new p(r),O=m.selectAll(".edgepath").data(r).enter().append("g"),j=function(t,e){return String(-1.1*(e+1))+"em"},S=function(t,e){return String(.6+1.1*(e+1))+"em"};O.each(function(t,e){var r=a.select(this),n=r.append("path").attr({class:"edgepath",id:s+"_edgepath"+e}).each(function(t){t.domNode=this}),i=r.selectAll(".edgelabel").data(t.labels).enter().append("text").attr("class","edgelabel");i.append("textPath").attr("xlink:href",function(){return"#"+s+"_edgepath"+e}).attr("startOffset","50%").text(d);var o=k.shapeForEdge(t);switch(t.getPath=h(20,o,t),o){case f.straight:i.attr("dy",j),t.refreshLabels=function(){i.attr("transform",function(){if(t.target.x<t.source.x){var e={x:(r=this.getBBox()).x+r.width/2,y:r.y+r.height/2};return"rotate(180 "+e.x+" "+e.y+")"}return null;var r})};break;case f.arc:var u;t.refreshLabels=function(){var e=t.target.x<t.source.x;e!==u&&(n.classed("reversed-arc",e),i.attr("dy",e?S:j),u=e)};break;case f.loop:i.attr("transform",function(t,e){return"translate("+String(8*(e+1))+" "+String(-8*(e+1))+")"}),t.refreshLabels=y}});var P=O.selectAll(".edgepath"),M=m.selectAll(".node").data(b).enter(),E=M.append("circle").attr("class","node").attr("r",20).style("stroke","black").style("fill",function(t,e){return l(e)}).each(function(t){t.domNode=this}).on("dblclick",w).call(_),A=M.append("circle").filter(function(t){for(var e in o)if(o[e]===t.label)return!0;return!1}).attr("class","accept node").attr("r",14).style("fill","none").style("stroke","black").on("dblclick",w).call(_),T=(M.append("path").filter(function(t){for(var e in n)if(n[e]===t.label)return!0;return!1}).attr("class","start-pointer").each(function(t){t.startPointer=this}),M.append("text").attr("class","nodelabel").attr("dy","0.25em").text(function(t){return t.label}));m.append("defs").selectAll("marker").data(["arrowhead","active-arrowhead","reversed-arrowhead","reversed-active-arrowhead"]).enter().append("marker").attr({id:function(t){return t},viewBox:"0 -5 10 10",refX:function(t){return 0===t.lastIndexOf("reversed-",0)?0:10},orient:"auto",markerWidth:10,markerHeight:10}).append("path").attr("d","M 0 -5 L 10 0 L 0 5 Z").attr("transform",function(t){return 0===t.lastIndexOf("reversed-",0)?"rotate(180 5 0)":null});var I=".edgepath {  marker-end: url(#arrowhead);}.edgepath.active-edge {  marker-end: url(#active-arrowhead);}.edgepath.reversed-arc {  marker-start: url(#reversed-arrowhead);  marker-end: none;}.edgepath.active-edge.reversed-arc {  marker-start: url(#reversed-active-arrowhead);  marker-end: none;}.start-pointer {  marker-end: url(#arrowhead)}";m.append("style").each(function(){this.styleSheet?this.styleSheet.cssText=I:this.textContent=I}),x.on("tick",function(){E.attr({cx:function(t){return t.x=g(20,u-20,t.x)},cy:function(t){return t.y=g(20,c-20,t.y)}}).each(function(t){return a.select(t.startPointer).attr("d","M "+(t.x-60)+" "+t.y+" L "+(t.x-20)+" "+t.y)}),A.attr({cx:function(t){return t.x=g(20,u-16,t.x)},cy:function(t){return t.y=g(20,c-20,t.y)}}),T.attr("x",function(t){return t.x}).attr("y",function(t){return t.y}),P.attr("d",function(t){return t.getPath()}),O.each(function(t){t.refreshLabels()}),b.every(function(t){return t.fixed})&&x.stop()}),this.force=x}r(/*! ./StateViz.css */67);var w=i.mapValues(i.pick(["x","y","px","py","fixed"]));Object.defineProperty(m.prototype,"positionTable",{get:function(){return w(this.__stateMap)},set:function(t){!function(t,e){i.forEach(function(e,r){var n=t[r];void 0!==n&&o(e,n)},e)}(t,this.__stateMap),this.force.resume()}}),t.exports=m},67:
/*!****************************************!*\
  !*** ./src/state-diagram/StateViz.css ***!
  \****************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(t,e,r){t.exports=r.p+"state-diagram/StateViz.css"},7:
/*!************************************!*\
  !*** ./src/tape/TMRuntimeError.js ***!
  \************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(t,e){function r(t,e){this.name="TMRuntimeError",this.stack=(new Error).stack,this.reason=t,this.details=e||{}}r.prototype=Object.create(Error.prototype),r.prototype.constructor=r,t.exports=r}});
//# sourceMappingURL=TMViz.bundle.js.map